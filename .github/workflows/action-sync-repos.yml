on: [push]

jobs:
  sync-with-gh-page:
    runs-on: ubuntu-latest
    name: Sync this repo with Greptime Website
    steps:
      - name: Checkout source repository
        uses: actions/checkout@v2
        with:
          path: source-repo
      - name: Checkout target repository
        uses: actions/checkout@v2
        with:
          repository: GreptimeTeam/website.git
          path: dev
          token: ${{ secrets.API_TOKEN_GITHUB }}
      - name: Sync the repo
        id: sync
        uses: tomasdelvechio/actions-push-repo-to-subdir@v1.2.0
        with:
          github-username: alili
          target-subdir-name: docs
